- var pageTitle = "";
include stats/_mixins

html
  head
    - var testing = true 
    title kinda.fun stats
    link(href="css/stats.css" type="text/css" rel="stylesheet")
    meta(name="viewport" content="width=device-width, initial-scale=1")
body
  #app(v-cloak)

    .stats-screen

      include stats/_general

      aside.general.general-stats(v-if="ui.viewing != 'general'")

        .summary(:class="{ active: (ui.viewing == 'cameo') }")
          figure
            img(src="svg/comparatively-famous.svg" @click="getData('cameo')")
          .last-played(v-if="stats.general && stats.general.lastPlayed && stats.general.lastPlayed.cameo")
            .time-caption Last Game
            .time-ago(v-text="formatTime(stats.general.lastPlayed.cameo,'fromNow')")
          .more-info

        .summary
          figure
            img(src="svg/invalid-logo.svg")
          .last-played(v-if="stats.general && stats.general.lastPlayed && stats.general.lastPlayed.invalid")
            .time-caption Last Game
            .time-ago(v-text="formatTime(stats.general.lastPlayed.invalid,'fromNow')")

        .summary(v-if="stats.general && stats.general.lastPlayed && stats.general.wrongest")
          figure
            img(src="svg/wrongest.svg")
          .last-played(v-if="stats.general && stats.general.lastPlayed && stats.general.lastPlayed.wrongest")
            .time-caption Last Game
            .time-ago(v-text="formatTime(stats.general.lastPlayed.wrongest,'fromNow')")

      main(v-if="ui.viewing != 'general'")

        include stats/_famous
        include stats/_invalid

    //-section.invalid.stats
      figure
        img(src="svg/invalid-logo.svg")
      .tables
        .grid-wrapper
          .grid-caption Game Sizes
          .grid-box
            .data-grid
              template(v-for="game in sortedList(stats.invalid.Games.PlayerCounts)")
                .count {{game.count}}
                .value {{game.players}} Players

        .grid-wrapper
          .grid-caption Naughty Mode?
          .grid-box
            .data-grid
              .count {{stats.invalid.Games.NaughtyMode.on}}
              .value Naughty Mode ON
              .count {{stats.invalid.Games.NaughtyMode.off}}
              .value Naughty Mode OFF

        .grid-wrapper
          .grid-caption Challenges
          .grid-box
            .data-grid
              template(v-for="challenge in sortedList(stats.invalid.Challenges)")
                .count {{challenge.count}}
                .value {{challenge.name}}

        .grid-wrapper
          .grid-caption Rules
          .grid-box
            .data-grid
              template(v-for="rule in sortedList(stats.invalid.Rules)")
                .count {{rule.count}}
                .value {{rule.name}}

        .grid-wrapper
          .grid-caption Successful Passwords
          .grid-box
            .data-grid
              template(v-for="suc in sortedList(stats.invalid.SuccessfulPasswords)")
                .count {{suc.count}}
                .value {{suc.pw}}

        .grid-wrapper
          .grid-caption Server Crashes
          .grid-box
            .data-grid
              template(v-for="crash in sortedList(stats.invalid.Crashes)")
                .count {{crash.count}}
                .value {{crash.pw}}

        .grid-wrapper
          .grid-caption Cracked Passwords
          .grid-box
            .data-grid
              template(v-for="crack in sortedList(stats.invalid.Cracks)")
                .count {{crack.count}}
                .value {{crack.pw}}

    //-section.wrogest.stats
      figure
        img(src="svg/wrongest.svg")


      .tables

        .grid-wrapper
          .grid-caption Game Sizes
          .grid-box
            .data-grid
              template(v-for="game in sortedList(stats.wrongest.Games.PlayerCounts)")
                .count {{game.count}}
                .value {{game.players}} Players

        .grid-wrapper
          .grid-caption Decks
          .grid-box
            .data-grid
              template(v-for="deck in sortedList(stats.wrongest.Decks)")
                .count {{deck.count}}
                .value {{deck.name}}
        
        .statement-grid-wrapper
          .grid-caption Statements
          .data-grid.statements
            template(v-for="statement in sortByScore(stats.wrongest.Statements)")
              .score(v-bind:class="{negative: (statement.score < 0), positive: (statement.score > 0)}")
                span(v-if="statement.score > 0") {{'+'+statement.score}}
                span(v-else-if="statement.score < 0") {{statement.score}}
                span(v-else) -
              .words “{{formatQuote(statement.words)}}”
              .votes {{statement.votes}}


  .javascripts
    if testing
      script(src="js/libraries/vue.full.js")
      script.
        const testing = true;
    else
      script(src="js/libraries/vue.min.js")
      script.
        const testing = false;
    
    script(src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js")

    script(src="https://cdn.jsdelivr.net/npm/vue-good-table@2.15.3/dist/vue-good-table.min.js")
    link(href="https://cdn.jsdelivr.net/npm/vue-good-table@2.12.2/dist/vue-good-table.css" rel="stylesheet")
    script(src="js/min/stats.min.js")