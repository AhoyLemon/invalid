"use strict";function randomNumber(e,a){return Math.floor(Math.random()*(a-e))+e}function randomFrom(e){return e[Math.floor(Math.random()*e.length)]}function shuffle(e){for(var a,s,r=e.length;r;a=Math.floor(Math.random()*r),s=e[--r],e[r]=e[a],e[a]=s);return e}function addCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function findInArray(e,a){let s=e.indexOf(a);return s>-1?s:null}function removeFromArray(e,a){for(var s=e.length-1;s--;)e[s]==a&&e.splice(s,1)}function percentOf(e,a){return 0==e||0==a?0:Math.round(100*a/e)}function sendEvent(e,a,s,r){r?ga("send","event",{eventCategory:e,eventAction:a,eventLabel:s,eventValue:r}):s?ga("send","event",{eventCategory:e,eventAction:a,eventLabel:s}):ga("send","event",{eventCategory:e,eventAction:a})}function countVowels(e){let a=0,s=e.match(/[AEIOU]/gi);return s&&(a=s.length),a}const siteURL="",playerID=randomNumber(1,100),employeeNumberSeed=randomNumber(1e4,99999),myDefaults={rulebux:6,passwordAttempts:0},roundDefaults={possibleChallenges:[],challenge:{},rules:[],bugs:[],attempts:[],claimedPasswords:[],possibleAnswerCount:0,averageSize:0,averageVowels:0,elapsedTime:0,roundTimer:void 0,hurryTimer:void 0,hurryTime:10,crash:{active:!1,word:"",player:[]}},uiDefaults={appliedForJob:!1,enterCode:{focus:!1},challengeID:null,addBug:"",addBugErrors:[],passwordAttempt:"",passwordAttemptErrors:[],passwordInputError:!1,passwordSucceded:!1,roundOver:!1,currentRule:{editing:!1,name:"",cost:0,inputValue:"",inputValueTwo:""}},rules=[{name:"Demand A Letter",cost:5},{name:"Ban A Letter",cost:3},{name:"Set A Maximum",cost:2},{name:"Set A Minimum",cost:2},{name:"Limit Vowels",cost:1},{name:"Ban A Combo",cost:1}],challenges=[{id:1,name:"Playable Mortal Kombat Characters",nameAsRule:"Your password must be a playable Mortal Kombat character",failedMessage:"[PASS] is not a playable Mortal Kombat character",possible:["johnny cage","kano","liu kang","raiden","scorpion","sonya blade","sub-zero","goro","shang tsung","reptile","baraka","jade","jax","kintaro","kitana","kung lao","mileena","noob saibot","shao khan","smoke","chameleon","cyrax","ermac","kabal","khameleon","motaro","nightwolf","rain","sektor","sheeva","sindel","stryker","meat","bo rai cho","frost"]},{id:2,name:"First Name of Bob's Burgers Characters",nameAsRule:"Your password MUST be the first name of a Bob's Burgers character",failedMessage:"[PASS] is not a Bob's Burgers character",possible:["Mike","Bob","LINDA","GENE","LOUISE","TINA","TEDDY","MORT","RUDY","JIMMY","ANDY","OLLIE","JOCELYN","TAMMY","HELEN","TREV","MARSHMALLOW","BOO BOO","DARRYL","PHILLIP","ALEX","ART","RANDY","KURT","LOGAN","SASHA"]},{id:3,name:"Words For Breasts (Recognized By The OED)",nameAsRule:"Your password MUST be a word the Oxford English Dictionary recognizes as a synonym for “breasts”",failedMessage:"The OED doesn't recognize [PASS] as a word for breasts.",possible:["CHEST","BUST","BOSOM","BOOBS","KNOCKERS","BOOBIES","BOOBS","BAZOOKAS","MELONS","JUBBLIES","BUBBLIES","ORBS","GLOBES","CHARLIES","BAPS","BAZOOMS","CASABAS","CHI CHIS","NORKS","TITS","TITTIES","JUGS","HOOTERS","CANS"]},{id:4,name:"African Countries",nameAsRule:"Your password MUST be a country in Africa",failedMessage:"[PASS] is not an African country",possible:["ALGERIA","ANGOLA","BENIN","BOTSWANA","Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cabo Verde","Cameroon","Central African Republic","Chad","Comoros","Republic of the Congo","Democratic Republic of the Congo","Cote d'Ivoire","Djibouti","Egypt","Equatorial Guinea","Eritrea","Eswatini","Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho","Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco","Mozambique","Namibia","Niger","Nigeria","Rwanda","Senegal","Seychelles","Sierra Leone","Somalia","South Africa","South Sudan","Sudan","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"]},{id:5,name:"European Countries",nameAsRule:"Your password MUST be a country in Europe",failedMessage:"Sorry! [PASS] is not a European Country.",possible:["Albania","Andorra","Armenia","Austria","Azerbaijan","Belarus","Belgium","Bosnia and Herzegovina","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Georgia","Germany","Greece","Hungary","Iceland","Ireland","Italy","Kazakhstan","Kosovo","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Moldova","Monaco","Montenegro","Netherlands","North Macedonia","Norway","Poland","Portugal","Romania","Russia","San Marino","Serbia","Slovakia","Slovenia","Spain","Sweden","Switzerland","Turkey","Ukraine","United Kingdom","Vatican City"]}];let currentPlayerNum=0;var app=new Vue({el:"#app",data:{currentlyInGame:!1,roomCode:null,isRoomHost:!1,rules:rules,playerCount:0,my:{employeeNumber:randomNumber(1e4,99999),name:"",playerIndex:-1,role:null,rulebux:6,passwordAttempts:0,score:0},players:[],round:{phase:"create or join",number:0,sysAdminIndex:-1,possibleChallenges:[],challenge:{},rules:[],bugs:[],attempts:[],claimedPasswords:[],possibleAnswerCount:0,averageSize:0,averageVowels:0,maxOffset:2,minOffset:2,vowelOffset:1,elapsedTime:0,roundTimer:void 0,hurryTimer:void 0,hurryTime:10,crash:{active:!1,word:"",player:{}}},allEmployeePasswords:[],ui:{appliedForJob:!1,enterCode:{focus:!1},challengeID:null,addBug:"",addBugErrors:[],passwordAttempt:"",passwordAttemptErrors:[],passwordInputError:!1,passwordSucceded:!1,roundOver:!1,currentRule:{editing:!1,name:"",cost:0,inputValue:"",inputValueTwo:""}},messages:[]},methods:{createRoom(){const e=this;e.roomCode=function(e){let a="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)a+=s.charAt(Math.floor(Math.random()*s.length));return a}(4),pubnub.subscribe({channels:[e.roomCode],withPresence:!0}),e.isRoomHost=!0,e.currentlyInGame=!0,e.round.phase="pregame";const a=new URL(window.location);a.searchParams.set("room",e.roomCode),window.history.pushState({},"",a)},joinRoom(){const e=this;pubnub.subscribe({channels:[e.roomCode],withPresence:!0}),e.currentlyInGame=!0,e.round.phase="pregame";const a=new URL(window.location);a.searchParams.set("room",e.roomCode),window.history.pushState({},"",a)},updatePlayer(){const e=this;e.ui.appliedForJob=!0;let a=!0;const s={name:e.my.name,employeeNumber:e.my.employeeNumber,isRoomHost:e.isRoomHost,role:null,score:0};e.players.forEach((function(r,n){r.employeeNumber==e.my.employeeNumber&&(e.players[n]=s,a=!1)})),a&&e.players.push(s),e.players.forEach((function(a,s){a.employeeNumber==e.my.employeeNumber&&(e.my.playerIndex=s)})),e.my.playerIndex<0&&alert("could not get a player index. this is a bug. this should not happen."),e.sendPlayerUpdate()},sendPlayerUpdate(){pubnub.publish({channel:this.roomCode,message:{type:"updatePlayers",data:{players:this.players}}})},startTheGame(){const e=this;e.players.forEach((function(a,s){a.isRoomHost?e.players[s].role="SysAdmin":e.players[s].role="employee"})),pubnub.publish({channel:e.roomCode,message:{type:"startTheGame",data:{players:e.players}}})},definePossibleChallenges(){let e=shuffle(challenges);e.length=3,this.round.possibleChallenges=e},chooseAChallenge(){const e=this;challenges.forEach((function(a){a.id==e.ui.challengeID&&(e.round.challenge=a)})),e.findPossibleRightAnswers(),e.findAverageSize(),e.findAverageVowelCount(),pubnub.publish({channel:e.roomCode,message:{type:"updatePasswordChallenge",data:{challenge:e.round.challenge}}})},chooseRule(e){const a=this;a.ui.currentRule.name=e.name,a.ui.currentRule.cost=e.cost,a.ui.currentRule.editing=!0},saveRule(e){const a=this;let s={type:"",message:"",inputValue:"",inputValueTwo:null};"Ban A Letter"==e.name&&(s.type=e.name,s.inputValue=a.ui.currentRule.inputValue.toUpperCase(),s.message="You may not use the letter "+s.inputValue),"Demand A Letter"==e.name&&(s.type=e.name,s.inputValue=a.ui.currentRule.inputValue.toUpperCase(),s.message="You must use the letter "+s.inputValue),"Set A Maximum"==e.name&&(s.type=e.name,s.inputValue=a.round.averageSize+a.round.maxOffset,s.message=a.ui.currentRule.inputValue),"Set A Minimum"==e.name&&(s.type=e.name,s.inputValue=a.round.averageSize-a.round.minOffset,s.message=a.ui.currentRule.inputValue),"Limit Vowels"==e.name&&(s.type=e.name,s.inputValue=a.round.averageVowels+a.round.vowelOffset,s.message=a.ui.currentRule.inputValue),"Ban A Combo"==e.name&&(s.type=e.name,s.inputValue=a.ui.currentRule.inputValue.toUpperCase(),s.inputValueTwo=a.ui.currentRule.inputValueTwo.toUpperCase(),s.inputValue==s.inputValueTwo?s.message="You may only use the letter "+s.inputValue+" once":s.message="You may not use the letters "+s.inputValue+" and "+s.inputValueTwo+" together"),a.my.rulebux=a.my.rulebux-e.cost,a.round.rules.push(s),a.clearCurrentRule(),a.findPossibleRightAnswers(),pubnub.publish({channel:a.roomCode,message:{type:"updatePasswordRules",data:{rules:a.round.rules}}})},clearCurrentRule(){const e=this;e.ui.currentRule.name="",e.ui.currentRule.inputValue="",e.ui.currentRule.inputValueTwo="",e.ui.currentRule.cost=0,e.ui.currentRule.editing=!1},addBug(){const e=this;e.ui.addBugErrors=[];const a=e.ui.addBug.toUpperCase();let s=!1;e.round.challenge.possible.forEach((function(e,r){a==e.toUpperCase()&&(s=!0)})),s||e.ui.addBugErrors.push("Just so you know, "+a+" wasn't a valid password"),findInArray(e.round.bugs,a)&&e.ui.addBugErrors.push("You already added "+a+"."),e.round.bugs&&e.round.bugs.length>0&&(e.my.rulebux-=1),e.ui.addBug="",e.round.bugs.push(a),pubnub.publish({channel:e.roomCode,message:{type:"updateBugs",data:{bugs:e.round.bugs}}})},onboardEmployees(){pubnub.publish({channel:this.roomCode,message:{type:"startGuessing",data:{sysAdminIndex:this.my.playerIndex}}})},roundStartTimer(){const e=this;e.round.roundTimer=setInterval(()=>{e.round.elapsedTime+=1,e.players[e.round.sysAdminIndex].score+=1},1e3)},resetRoundTimer(){const e=this;clearInterval(e.round.roundTimer),e.round.roundTimer=void 0,e.round.elapsedTime=0},startHurryTimer(){const e=this;e.round.hurryTimer=setInterval(()=>{e.round.hurryTime-=.1,e.round.hurryTime<=0&&e.endTheGuessingRound()},100)},resetHurryTimer(){const e=this;clearInterval(e.round.hurryTimer),e.round.hurryTimer=void 0,e.round.hurryTime=10},endTheGuessingRound(){pubnub.publish({channel:this.roomCode,message:{type:"roundOver"}})},tryToFailThis(e){e=e.toUpperCase();let a=!1,s=[];return this.round.rules.forEach((function(r){"Ban A Letter"==r.type&&e.includes(r.inputValue)&&(a=!0,s.push("Password cannot contain "+r.inputValue)),"Demand A Letter"==r.type&&(e.includes(r.inputValue)||(a=!0,s.push("Password must contain "+r.inputValue))),"Set A Maximum"==r.type&&e.length>r.inputValue&&(a=!0,s.push("Password is too long")),"Set A Minimum"==r.type&&possibility.length<r.inputValue&&(a=!0,s.push("Password is too short")),"Limit Vowels"==r.type&&countVowels(e)>r.inputValue&&(a=!0,s.push("Password has too many vowels")),"Ban A Combo"==r.type&&(r.inputValue==r.inputValueTwo?e.replace(/[^a]/g,"").length>1&&(a=!0,s.push("Password can only contain one "+r.inputValue)):r.inputValue!=r.inputValueTwo&&e.includes(r.inputValue)&&e.includes(r.inputValueTwo)&&(a=!0,s.push("Password cannot contain both the letters "+r.inputValue+" and "+r.inputValueTwo)))})),!!a&&{failed:!0,reasons:s}},tryToCrashWith(e){let a=!1;return this.round.bugs.forEach((function(s){s==e&&(a=!0)})),a},tryToFind(e){e=e.toUpperCase();let a=!1;return this.round.challenge.possible.forEach((function(s){e.toUpperCase()==s.toUpperCase()&&(a=!0)})),a},tryThisPassword(e){const a=this;e=e.toUpperCase(),a.ui.passwordAttemptErrors=[];const s=a.tryToCrashWith(e),r=a.tryToFailThis(e),n=a.tryToFind(e);let t=!1;if(r&&(a.ui.passwordAttemptErrors=r.reasons,a.ui.passwordInputError=!0),!n){let s=a.round.challenge.failedMessage.replace("[PASS]",e);a.ui.passwordAttemptErrors.push(s)}!n||r||s||(t=!0),a.my.passwordAttempts++,a.ui.passwordAttempt="",s?pubnub.publish({channel:a.roomCode,message:{type:"crashedServer",data:{playerIndex:a.my.playerIndex,pwAttempt:e,attemptCount:a.my.passwordAttempts,result:"crash"}}}):t?a.passwordSuccess(e):pubnub.publish({channel:a.roomCode,message:{type:"triedPassword",data:{playerIndex:a.my.playerIndex,pwAttempt:e,attemptCount:a.my.passwordAttempts,result:"failed"}}})},findPossibleRightAnswers(){const e=this;let a=0;e.round.challenge.possible.forEach((function(s){0==e.tryToFailThis(s)&&a++})),e.round.possibleAnswerCount=a},findAverageSize(){const e=this.round.challenge.possible;for(var a=0,s=0;s<e.length;s++)a+=e[s].length;var r=a/e.length;this.round.averageSize=Math.round(r)},findAverageVowelCount(){const e=this.round.challenge.possible;for(var a=0,s=0;s<e.length;s++){let r=e[s].match(/[aeiou]/gi);r&&(a+=r.length)}var r=a/e.length;this.round.averageVowels=Math.round(r)},passwordSuccess(e){const a=this;a.my.score+=100,a.my.score+=20,a.ui.passwordSucceded=!0,pubnub.publish({channel:a.roomCode,message:{type:"passwordSuccess",data:{playerIndex:a.my.playerIndex,pwAttempt:e,attemptCount:a.my.passwordAttempts,playerScore:a.my.score,result:"success"}}})},startNextRoundClicked(){const e=this;pubnub.publish({channel:e.roomCode,message:{type:"startNewRound",data:{playerIndex:e.my.playerIndex,players:e.players}}})}},computed:{computedSysAdminName(){return this.players[this.round.sysAdminIndex].name},computedSysAdminIndex(){return this.round.sysAdminIndex}},mounted:function(){const e=this;var a=new URLSearchParams(window.location.search);a.has("room")&&(e.roomCode=a.get("room"))},directives:{}});Vue.directive("touppercase",{update(e){e.value=e.value.toUpperCase()}}),Vue.directive("focus",{inserted:function(e){e.focus()}});const theChannel="the_guide",pubnub=new PubNub({publishKey:"pub-c-c25666ba-28d6-41ef-8c12-670fc0f40021",subscribeKey:"sub-c-ba437e90-31bb-11eb-9713-12bae088af96",uuid:playerID});pubnub.addListener({message:function(e){if(displayMessage("[MESSAGE: received]",e.message,e.timetoken,e),"updatePlayers"==e.message.type&&(app.players=e.message.data.players,app.my&&app.my.playerIndex&&app.my.playerIndex>-1&&(app.my.role=app.players[app.my.playerIndex].role)),"startTheGame"==e.message.type&&(app.players=e.message.data.players,app.my.role=e.message.data.players[app.my.playerIndex].role,app.round.phase="choose rules",app.round.number=1,"SysAdmin"==app.my.role&&app.definePossibleChallenges()),"updatePasswordChallenge"==e.message.type&&(app.round.challenge=e.message.data.challenge),"updatePasswordRules"==e.message.type&&(app.round.rules=e.message.data.rules),"updateBugs"==e.message.type&&(app.round.bugs=e.message.data.bugs),"startGuessing"==e.message.type&&(app.round.phase="create password",app.round.sysAdminIndex=e.message.data.sysAdminIndex,app.roundStartTimer()),"triedPassword"==e.message.type&&app.round.attempts.push(e.message.data),"passwordSuccess"==e.message.type){let a=e.message.data.playerIndex;app.players[a].score=e.message.data.playerScore,app.round.claimedPasswords.push(e.message.data.pwAttempt),app.round.attempts.push(e.message.data),null==app.round.hurryTimer&&app.startHurryTimer();let s={pw:e.message.data.pwAttempt,name:app.players[a].name,playerIndex:a};app.allEmployeePasswords.push(s),app.round.claimedPasswords.length>=app.players.length-1&&app.endTheGuessingRound()}if("roundOver"==e.message.type&&(app.ui.roundOver=!0,app.resetHurryTimer(),app.resetRoundTimer()),"crashedServer"==e.message.type){let a=e.message.data.playerIndex;app.round.phase="crashed",app.round.crash.active=!0,app.round.crash.player=app.players[a],app.round.crash.word=e.message.data.pwAttempt,app.round.attempts.push(e.message.data),"SysAdmin"==app.my.role&&(app.my.score+=100),app.endTheGuessingRound()}if("startNewRound"==e.message.type){app.players=e.message.data.players;let a=app.round.sysAdminIndex+1;a>=app.players.length?alert("XXX you have cycled thru all players. Soooooo... Uhhh, do something about that."):app.round.sysAdminIndex=a,app.players.forEach((function(e,a){e.role="employee"})),app.players[a].role="SysAdmin",app.my.role=app.players[app.my.playerIndex].role,app.ui=uiDefaults,app.round.phase="choose rules",app.round.number+=1,app.round.possibleChallenges=[],app.round.challenge={},app.round.rules=[],app.round.attempts=[],app.round.claimedPasswords=[],app.round.elapsedTime=0,app.round.crash={active:!1,word:"",player:{}}}},status:function(e){displayMessage(e.category,"connected to channels: "+e.affectedChannels,e.currentTimetoken,e)},presence:function(e){e.channel!=theChannel&&(app.playerCount=e.occupancy),app.isRoomHost&&app.sendPlayerUpdate()}}),pubnub.subscribe({channels:["the_guide"],withPresence:!0});const displayMessage=function(e,a,s,r){r?app.messages.push({type:e,msg:a,timeStamp:s,obj:r}):s?app.messages.push({type:e,msg:a,timeStamp:s}):a?app.messages.push({type:e,msg:a}):e&&app.messages.push({type:e})};
//# sourceMappingURL=site.min.js.map