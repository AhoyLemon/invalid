"use strict";function randomNumber(e,a){return Math.floor(Math.random()*(a-e))+e}function randomFrom(e){return e[Math.floor(Math.random()*e.length)]}function shuffle(e){for(var a,s,r=e.length;r;a=Math.floor(Math.random()*r),s=e[--r],e[r]=e[a],e[a]=s);return e}function addCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function findInArray(e,a){let s=e.indexOf(a);return s>-1?s:null}function removeFromArray(e,a){for(var s=e.length-1;s--;)e[s]==a&&e.splice(s,1)}function percentOf(e,a){return 0==e||0==a?0:Math.round(100*a/e)}function sendEvent(e,a,s,r){r?ga("send","event",{eventCategory:e,eventAction:a,eventLabel:s,eventValue:r}):s?ga("send","event",{eventCategory:e,eventAction:a,eventLabel:s}):ga("send","event",{eventCategory:e,eventAction:a})}function countVowels(e){let a=0,s=e.match(/[AEIOU]/gi);return s&&(a=s.length),a}const siteURL="",playerID=randomNumber(1,100),employeeNumberSeed=randomNumber(1e4,99999),defaults={rulebux:7,maxOffset:2,minOffset:2,vowelOffset:1,hurryTime:20,adminTimeLeft:90,employeeMaxTime:50,hackAccountBonus:40,finalTimeLeft:60},myDefaults={rulebux:7,passwordAttempts:0},roundDefaults={possibleChallenges:[],challenge:{},rules:[],bugs:[],attempts:[],claimedPasswords:[],possibleAnswerCount:0,averageSize:0,averageVowels:0,elapsedTime:0,adminTimer:void 0,roundTimer:void 0,hurryTimer:void 0,hurryTime:defaults.hurryTime,adminTimeLeft:defaults.adminTimeLeft,finalTimeLeft:defaults.finalTimeLeft,crash:{active:!1,word:"",player:[]}};function resetRoundVariables(){app.round.possibleChallenges=[],app.round.challenge={},app.round.rules=[],app.round.bugs=[],app.round.attempts=[],app.round.claimedPasswords=[],app.round.possibleAnswerCount=0,app.round.averageSize=0,app.round.averageVowels=0,app.round.elapsedTime=0,app.round.adminTimer=void 0,app.round.roundTimer=void 0,app.round.hurryTimer=void 0,app.round.hurryTime=defaults.hurryTime,app.round.adminTimeLeft=defaults.adminTimeLeft,app.round.finalTimeLeft=defaults.finalTimeLeft,app.round.crash.active=!1,app.round.crash.word=null,app.round.crash.player=[]}function resetUI(){app.ui.appliedForJob=!1,app.ui.enterCode.focus=!1,app.ui.challengeID=null,app.ui.roundOver=!1,app.ui.addBug=null,app.ui.addBugErrors=[],app.ui.passwordAttempt=null,app.ui.passwordInputError=!1,app.ui.passwordSucceeded=!1,app.ui.currentRule.editing=!1,app.ui.currentRule.name=null,app.ui.currentRule.cost=0,app.ui.currentRule.inputValue=null,app.ui.currentRule.inputValueTwo=null,app.ui.enterFinalPasswords=!1,app.ui.passwordSuccessMessage=null}const rules=[{name:"Demand A Letter",cost:5},{name:"Ban A Letter",cost:3},{name:"Set A Maximum",cost:2},{name:"Set A Minimum",cost:2},{name:"Limit Vowels",cost:1},{name:"Ban A Combo",cost:1}],audioSrc="audio/",soundNewRule=new Howl({src:["audio/odqid3.mp3"],volume:.25}),soundStartGuessing=new Howl({src:["audio/0dln84.mp3"],volume:.6}),soundBadGuess=new Howl({src:["audio/3ge4hh-2.mp3"],volume:.55}),soundCorrectGuess=new Howl({src:["audio/pi392f.mp3"],volume:.8}),soundSystemCrash=new Howl({src:["audio/unngxf.mp3"],volume:.8}),soundCorrect=new Howl({src:["audio/correct.mp3"]}),soundNo=new Howl({src:["audio/no.mp3"]}),soundCracked=new Howl({src:["audio/password_cracked.mp3"]}),soundYouIdiot=new Howl({src:["audio/you_idiot.mp3"]}),soundTooSlow=new Howl({src:["audio/too_slow.mp3"]}),challenges=[{id:1,name:"Mortal Kombat",nameAsRule:"Your password must be a playable Mortal Kombat character",failedMessage:"[PASS] is not a playable Mortal Kombat character",possible:["johnny cage","kano","liu kang","raiden","scorpion","sonya blade","sub-zero","goro","shang tsung","reptile","baraka","jade","jax","kintaro","kitana","kung lao","mileena","noob saibot","shao khan","smoke","chameleon","cyrax","ermac","kabal","khameleon","motaro","nightwolf","rain","sektor","sheeva","sindel","stryker","meat","bo rai cho","frost"]},{id:2,name:"Bob's Burgers",nameAsRule:"Your password must be the first name of a Bob's Burgers character",failedMessage:"[PASS] is not a Bob's Burgers character",possible:["Mike","Bob","LINDA","GENE","LOUISE","TINA","TEDDY","MORT","RUDY","JIMMY","ANDY","OLLIE","JOCELYN","TAMMY","HELEN","TREV","MARSHMALLOW","BOO BOO","DARRYL","PHILLIP","ALEX","ART","RANDY","KURT","LOGAN","SASHA"]},{id:3,name:"Words For Breasts",nameAsRule:"Your password must be a word the Oxford English Dictionary recognizes as a synonym for ‚Äúbreasts‚Äù",failedMessage:"The OED doesn't recognize [PASS] as a word for breasts.",naughty:!0,possible:["CHEST","BUST","BOSOM","BOOBS","KNOCKERS","BOOBIES","BOOBS","BAZOOKAS","MELONS","JUBBLIES","BUBBLIES","ORBS","GLOBES","CHARLIES","BAPS","BAZOOMS","CASABAS","CHI CHIS","NORKS","TITS","TITTIES","JUGS","HOOTERS","CANS"]},{id:4,name:"African Countries",nameAsRule:"Your password MUST be a country in Africa",failedMessage:"[PASS] is not an African country",possible:["ALGERIA","ANGOLA","BENIN","BOTSWANA","Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cabo Verde","Cameroon","Central African Republic","Chad","Comoros","Republic of the Congo","Democratic Republic of the Congo","Cote d'Ivoire","Djibouti","Egypt","Equatorial Guinea","Eritrea","Eswatini","Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho","Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco","Mozambique","Namibia","Niger","Nigeria","Rwanda","Senegal","Seychelles","Sierra Leone","Somalia","South Africa","South Sudan","Sudan","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"]},{id:5,name:"European Countries",nameAsRule:"Your password must be a country in Europe",failedMessage:"Sorry! [PASS] is not a European Country.",possible:["Albania","Andorra","Armenia","Austria","Azerbaijan","Belarus","Belgium","Bosnia and Herzegovina","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Georgia","Germany","Greece","Hungary","Iceland","Ireland","Italy","Kazakhstan","Kosovo","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Moldova","Monaco","Montenegro","Netherlands","North Macedonia","Norway","Poland","Portugal","Romania","Russia","San Marino","Serbia","Slovakia","Slovenia","Spain","Sweden","Switzerland","Turkey","Ukraine","United Kingdom","Vatican City"]},{id:6,name:"Football Teams",nameAsRule:"Your password must be an NFL football team name",failedMessage:"Sorry! There are no [PASS] in the NFL.",possible:["CARDINALS","FALCONS","PANTHERS","BEARS","COWBOYS","LIONS","PACKERS","RAMS","VIKINGS","SAINTS","GIANTS","EAGLES","49ERS","SEAHAWKS","BUCCANEERS","FOOTBALL TEAM","RAVENS","BILLS","BENGALS","BROWNS","BRONCOS","TEXANS","COLTS","JAGUARS","CHIEFS","RAIDERS","CHARGERS","DOLPHINS","PATRIOTS","STEELERS","TITANS"]},{id:7,name:"State Birds",nameAsRule:"Your password must be a U.S. state bird",failedMessage:"Sorry, no US State made [PASS] their official bird.",possible:["YELLOWHAMMER","WILLOW PTARMIGAN","WREN","MOCKINGBIRD","QUAIL","LARK","ROBIN","BLUE HEN","THRUSH","THRASHER","GOOSE","BLUEBIRD","CARDINAL","GOLDFINCH","FINCH","MEADOWLARK","PELICAN","CHICKADEE","ORIOLE","LOON","ROADRUNNER","FRUIT DOVE","GROUSE","RHODE ISLAND RED","PHEASANT","GULL"]},{id:8,name:"Synonyms for Blue",nameAsRule:"Your password must be a synonym for blue",failedMessage:"Thesaurus.com doesn't list [PASS] as a synonym for blue.",possible:["AZURE","COBALT","SAPPIRE","CERULEAN","NAVY","ULTRAMARINE","LAPIS","INDIGO","AQUAMARIE","TURQUOISE","TEAL","CYAN","DEPRESSED","DOWN","SAD","SADDENED","UNHAPPY","MELANCHOLY","MISERABLE","SORROWFUL","GLOOMY","DEJECTED","DOWNHEARTED","DISHEARTENED","DESPONDENT","DISPIRITED","LOW","LOW SPIRITED","HEAVY HEARTED","GLUM","MOROSE","DISMAL","DOWNCAST","CAST DOWN","TEARFUL","DOWN IN THE DUMPS","DOWN IN THE MOUTH","FED UP","INDECENT","DIRTY","RUDE","COARSE","VULGAR","BAWDY","LEWD","RACY"]},{id:9,name:"My Little Ponies",nameAsRule:"Your password must be a My Little Pony (unicorns count)",failedMessage:"[PASS] isn't a My Little Pony! ü¶Ñ",possible:["TWILIGHT SPARKLE","APPLEJACK","FLUTTERSHY","RARITY","PINKIE PIE","RAINBOW DASH","APPLE BLOOM","SCOOTALOO","SWEETIE BELLE","BABS SEED","PRINCESS CELESTIA","PRINCESS LUNA","PRINCE BLUEBLOOD","SHINING ARMOR","PROCESS CADENCE","FLURRY HEART","PRINCESS AMORE","GRANNY SMITH","BIG MCINTOSH","BRAEBURN","AUNT ORANGE","UNCLE ORANGE","HAYSEED TURNIP TRUCK","APPLE STRUDEL","AUNTIE APPLESAUCE","APPLE ROSE","GOLDIE DELICIOUS","BRIGHT MAC","PEAR BUTTER","MAUD PIE","STARLIGHT GLIMMER","SUNSET SHIMMER","TEMPEST SHADOW"]},{id:9,name:"Leafy Green Vegetables",nameAsRule:"Your password must be a leafy green vegetable",failedMessage:"[PASS] is not a leafy green vegeable",possible:["ARUGULA","BIBB","CABBAGE","LETTUCE","BEET GREENS","COLLARD GREENS","DANDELION GREENS","KALE","MICROGREENS","MUSTARD GREENS","RAPINI","BROCCOLI RABE","ROMAINE","SPINACH","SWISS CHARD","WATERCRESS","ENDIVE","BOK CHOY","TURNIP GREENS","PARSLEY"]},{id:10,name:"World Languages",nameAsRule:"Your password must be an Official Language of any country",failedMessage:"[PASS] is not a language recognized by any country.",possible:["ABKHAZ","ALBANIAN","ARABIC","ARMENIAN","AZERBAIJANI","BELARUSIAN","BENGALI","BOSNIAN","BULGARIAN","BURMESE","CASTILIAN","CATALAN","COMORIAN","CROATIAN","CZECH","DANISH","DARI","DUTCH","DZONGKHA","ENGLISH","ESTONIAN","FIJIAN","FINNISH","FRENCH","GEORGIAN","GERMAN","GREEK","HEBREW","HINDI","HUNGARIAN","ICELANDIC","INDONESIAN","IRISH","ITALIAN","JAPANESE","KAZAKH","KHMER","KIRUNDI","KYRGYZ","KOREAN","LAO","LATVIAN","LITHUANIAN","LUXEMBOURGISH","MACEDONIAN","MALAY","MALTESE","MAORI","MANDARIN","MONGOLIAN","NEPALI","NORWEGIAN","PALAUAN","PASHTO","PERSIAN","POLISH","PORTUGUESE","QUECHUA","ROMANIAN","RUSSIAN","SERBIAN","SLOVAK","SLOVENE","SOMALI","SOTHO","SPANISH","SWAHILI","SWAZI","SWEDISH","TAJIK","TAMAZIGHT","TETUM","TIGRINYA","TSWANA","TURKISH","UKRANIAN","URDU","UZBEK","WOLEAIAN"],source:"https://en.wikipedia.org/wiki/List_of_official_languages_by_country_and_territory"},{id:11,name:"Coen Brothers Movies",nameAsRule:"Your password must be the title of a film written and/or directed by Joel and/or Ethan Coen.",failedMessage:"[PASS] is not a Coen Brothers movie.",possible:["BLOOD SIMPLE","CRIMEWAVE","RAISING ARIZONA","MILLER'S CROSSING","BARTON FINK","THE HUDSUCKER PROXY","FARGO","THE BIG LEBOWSKI","THE NAKED MAN","O BROTHER, WHERE ART THOU?","THE MAN WHO WASN'T THERE","INTOLERABLE CRUELTY","THE LADYKILLERS","TUILERIES","WORLD CINEMA","NO COUNTRY FOR OLD MEN","BURN AFTER READING","A SERIOUS MAN","TRUE GRIT","GAMBIT","INSIDE LLEWYN DAVIS","UNBROKEN","BRIDGE OF SPIES","HAIL, CAESAR!","SUBURBICON","THE BALLAD OF BUSTER SCRUGGS","THE TRAGEDY OF MACBETH"]},{id:13,name:"Worst Actors",nameAsRule:"Your password must be the LAST name of a ‚ÄúWorst Actor‚Äù award winner.",hint:"‚ÄúWorst Actor‚Äù is a separate category from ‚ÄúWorst Actress‚Äù",failedMessage:"[PASS] never won a Razzie",possible:["DIAMOND","SPILSBURY","OLIVIER","ATKINS","STALLONE","PRINCE","COSBY","SHATNER","CLAY","COSTNER","REYNOLDS","SHORE","ARNOLD","WILLIS","SANDLER","TRAVOLTA","GREEN","BENIGNI","AFFLECK","BUSH","SCHNEIDER","WAYANS","MURPHY","MYERS","JONAS","KUTCHER","SMITH","CAMERON","DORNAN","D'SOUZA","CRUISE","TRUMP"]},{id:14,name:"Worst Actresses",nameAsRule:"Your password must be the LAST name of a ‚ÄúWorst Actress‚Äù award winner",hint:"‚ÄúWorst Actress‚Äù is a separate category from ‚ÄúWorst Actor‚Äù",failedMessage:"[PASS] never won a Razzie",possible:["SHIELDS","DEREK","DUNAWAY","ZADORA","BLAIR","MADONNA","MINELLI","LOCKLEAR","YOUNG","GRIFFITH","STONE","BERKLEY","MOORE","SPICE","DONAHUE","CAREY","SPEARS","LOPEZ","BERRY","MCCARTHY","LOHAN","HILTON","BULLOCK","CATTRALL","DAVIS","NIXON","PARKER","STEWART","PERRY","DIAZ","JOHNSON","DUFF"]}];let currentPlayerNum=0;var app=new Vue({el:"#app",data:{currentlyInGame:!1,roomCode:null,isRoomHost:!1,rules:rules,playerCount:0,maxRounds:0,my:{employeeNumber:randomNumber(1e4,99999),name:"",playerIndex:-1,role:null,rulebux:defaults.rulebux,passwordAttempts:0,score:0},players:[],round:{phase:"create or join",number:0,sysAdminIndex:-1,possibleChallenges:[],challenge:{},rules:[],bugs:[],attempts:[],claimedPasswords:[],possibleAnswerCount:0,averageSize:0,averageVowels:0,letterCounts:[],demandableLetters:[],maxOffset:defaults.maxOffset,minOffset:defaults.minOffset,vowelOffset:defaults.vowelOffset,elapsedTime:0,adminTimer:void 0,roundTimer:void 0,hurryTimer:void 0,hurryTime:defaults.hurryTime,adminTimeLeft:defaults.adminTimeLeft,finalTimeLeft:defaults.finalTimeLeft,crash:{active:!1,word:"",player:{}}},allEmployeePasswords:[],ui:{appliedForJob:!1,enterCode:{focus:!1},challengeID:null,addBug:"",addBugErrors:[],passwordAttempt:"",passwordAttemptErrors:[],passwordInputError:!1,passwordSucceeded:!1,roundOver:!1,currentRule:{editing:!1,name:"",cost:0,inputValue:"",inputValueTwo:""},enterFinalPasswords:!1,passwordSuccessMessage:null},messages:[]},methods:{createRoom(){const e=this;e.roomCode=function(e){let a="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)a+=s.charAt(Math.floor(Math.random()*s.length));return a}(4),pubnub.subscribe({channels:[e.roomCode],withPresence:!0}),e.isRoomHost=!0,e.currentlyInGame=!0,e.round.phase="pregame";const a=new URL(window.location);a.searchParams.set("room",e.roomCode),window.history.pushState({},"",a)},joinRoom(){const e=this;pubnub.subscribe({channels:[e.roomCode],withPresence:!0}),e.currentlyInGame=!0,e.round.phase="pregame";const a=new URL(window.location);a.searchParams.set("room",e.roomCode),window.history.pushState({},"",a)},requestPlayers(){const e=this;e.roomCode&&pubnub.publish({channel:e.roomCode,message:{type:"requestPlayers",data:{}}})},updatePlayer(){const e=this;e.ui.appliedForJob=!0;let a=!0;const s={name:e.my.name,employeeNumber:e.my.employeeNumber,isRoomHost:e.isRoomHost,role:null,score:0};e.players.forEach((function(r,n){r.employeeNumber==e.my.employeeNumber&&(e.players[n]=s,a=!1)})),a&&e.players.push(s),e.players.forEach((function(a,s){a.employeeNumber==e.my.employeeNumber&&(e.my.playerIndex=s)})),e.my.playerIndex<0&&alert("could not get a player index. this is a bug. this should not happen."),e.sendPlayerUpdate()},sendPlayerUpdate(){pubnub.publish({channel:this.roomCode,message:{type:"updatePlayers",data:{players:this.players}}})},startTheGame(){const e=this;e.players.forEach((function(a,s){a.isRoomHost?e.players[s].role="SysAdmin":e.players[s].role="employee"})),2==e.players.length||3==e.players.length?e.maxRounds=6:4==e.players.length?e.maxRounds=4:e.maxRounds=e.players.length,pubnub.publish({channel:e.roomCode,message:{type:"startTheGame",data:{players:e.players,maxRounds:e.maxRounds,sysAdminIndex:e.my.playerIndex}}})},definePossibleChallenges(){let e=shuffle(challenges);e.length=3,this.round.possibleChallenges=e},chooseAChallenge(){const e=this;challenges.forEach((function(a){a.id==e.ui.challengeID&&(e.round.challenge=a)})),e.findPossibleRightAnswers(),e.findAverageSize(),e.findAverageVowelCount(),e.countLettersInEachWord(),e.startAdminTimer(),pubnub.publish({channel:e.roomCode,message:{type:"updatePasswordChallenge",data:{challenge:e.round.challenge}}})},chooseRule(e){const a=this;a.ui.currentRule.name=e.name,a.ui.currentRule.cost=e.cost,a.ui.currentRule.editing=!0},saveRule(e){const a=this;let s={type:"",message:"",inputValue:"",inputValueTwo:null};"Ban A Letter"==e.name&&(s.type=e.name,s.inputValue=a.ui.currentRule.inputValue.toUpperCase(),s.message="You may not use the letter "+s.inputValue),"Demand A Letter"==e.name&&(s.type=e.name,s.inputValue=a.ui.currentRule.inputValue.toUpperCase(),s.message="You must use the letter "+s.inputValue),"Set A Maximum"==e.name&&(s.type=e.name,s.inputValue=a.round.averageSize+a.round.maxOffset,s.message=a.ui.currentRule.inputValue),"Set A Minimum"==e.name&&(s.type=e.name,s.inputValue=a.round.averageSize-a.round.minOffset,s.message=a.ui.currentRule.inputValue),"Limit Vowels"==e.name&&(s.type=e.name,s.inputValue=a.round.averageVowels+a.round.vowelOffset,s.message=a.ui.currentRule.inputValue),"Ban A Combo"==e.name&&(s.type=e.name,s.inputValue=a.ui.currentRule.inputValue.toUpperCase(),s.inputValueTwo=a.ui.currentRule.inputValueTwo.toUpperCase(),s.inputValue==s.inputValueTwo?s.message="You may only use the letter "+s.inputValue+" once":s.message="You may not use the letters "+s.inputValue+" and "+s.inputValueTwo+" together"),a.round.rules.push(s),a.findPossibleRightAnswers(),a.round.possibleAnswerCount>=a.players.length?(a.my.rulebux=a.my.rulebux-e.cost,pubnub.publish({channel:a.roomCode,message:{type:"updatePasswordRules",data:{rules:a.round.rules}}})):(alert("ERROR: \n Sorry, this rule would make the game impossible \n This interface will look better eventually."),a.round.rules.pop(),a.findPossibleRightAnswers()),a.clearCurrentRule()},clearCurrentRule(){const e=this;e.ui.currentRule.name="",e.ui.currentRule.inputValue="",e.ui.currentRule.inputValueTwo="",e.ui.currentRule.cost=0,e.ui.currentRule.editing=!1},addBug(){const e=this;e.ui.addBugErrors=[];const a=e.ui.addBug.toUpperCase();let s=!1;e.round.challenge.possible.forEach((function(e,r){a==e.toUpperCase()&&(s=!0)})),s||e.ui.addBugErrors.push("Just so you know, "+a+" wasn't a valid password"),findInArray(e.round.bugs,a)&&e.ui.addBugErrors.push("You already added "+a+"."),e.round.bugs&&e.round.bugs.length>0&&(e.my.rulebux-=1),e.ui.addBug="",e.round.bugs.push(a),pubnub.publish({channel:e.roomCode,message:{type:"updateBugs",data:{bugs:e.round.bugs}}})},onboardEmployees(){const e=this;e.resetAdminTimer(),pubnub.publish({channel:e.roomCode,message:{type:"startGuessing",data:{sysAdminIndex:e.my.playerIndex}}})},startAdminTimer(){const e=this;e.round.adminTimer=setInterval(()=>{e.round.adminTimeLeft-=.05,e.round.adminTimeLeft<=0&&e.onboardEmployees()},50)},resetAdminTimer(){const e=this;clearInterval(e.round.adminTimer),e.round.adminTimer=void 0,e.round.adminTimeLeft=defaults.adminTimeLeft},roundStartTimer(){const e=this;e.round.roundTimer=setInterval(()=>{e.round.elapsedTime+=1,e.players[e.round.sysAdminIndex].score+=1,e.round.elapsedTime>=defaults.employeeMaxTime-defaults.hurryTime&&null==e.round.hurryTimer&&e.startHurryTimer()},1e3)},resetRoundTimer(){const e=this;clearInterval(e.round.roundTimer),e.round.roundTimer=void 0,e.round.elapsedTime=0},startHurryTimer(){const e=this;e.round.hurryTimer=setInterval(()=>{e.round.hurryTime-=.1,e.round.hurryTime<=0&&e.endTheGuessingRound()},100)},resetHurryTimer(){const e=this;clearInterval(e.round.hurryTimer),e.round.hurryTimer=void 0,e.round.hurryTime=defaults.hurryTime},startCountdownToFinalRound(){const e=this;e.round.hurryTime=3*defaults.hurryTime,e.round.hurryTimer=setInterval(()=>{e.round.hurryTime-=1,e.round.hurryTime<=0&&(e.ui.enterFinalPasswords=!0,clearInterval(e.round.hurryTimer),e.round.hurryTimer=void 0,e.startFinalRoundCounter())},1e3)},startFinalRoundCounter(){const e=this;e.round.finalTimeLeft=defaults.finalTimeLeft,e.round.roundTimer=setInterval(()=>{e.round.finalTimeLeft-=1,e.round.finalTimeLeft<=0&&pubnub.publish({channel:e.roomCode,message:{type:"gameOver"}})},1001)},endTheGuessingRound(){this.ui.passwordSucceeded=!1,pubnub.publish({channel:this.roomCode,message:{type:"roundOver"}})},tryToFailThis(e){e=e.toUpperCase();let a=!1,s=[];return this.round.rules.forEach((function(r){"Ban A Letter"==r.type&&e.includes(r.inputValue)&&(a=!0,s.push("Password cannot contain "+r.inputValue)),"Demand A Letter"==r.type&&(e.includes(r.inputValue)||(a=!0,s.push("Password must contain "+r.inputValue))),"Set A Maximum"==r.type&&e.length>r.inputValue&&(a=!0,s.push("Password is too long")),"Set A Minimum"==r.type&&e.length<r.inputValue&&(a=!0,s.push("Password is too short")),"Limit Vowels"==r.type&&countVowels(e)>r.inputValue&&(a=!0,s.push("Password has too many vowels")),"Ban A Combo"==r.type&&(r.inputValue==r.inputValueTwo?e.replace(/[^a]/g,"").length>1&&(a=!0,s.push("Password can only contain one "+r.inputValue)):r.inputValue!=r.inputValueTwo&&e.includes(r.inputValue)&&e.includes(r.inputValueTwo)&&(a=!0,s.push("Password cannot contain both the letters "+r.inputValue+" and "+r.inputValueTwo)))})),!!a&&{failed:!0,reasons:s}},tryToCrashWith(e){let a=!1;return this.round.bugs.forEach((function(s){s==e&&(a=!0)})),a},tryToFindDuplicatePassword(e){return!!this.round.claimedPasswords.includes(e)},tryToFind(e){e=e.toUpperCase();let a=!1;return this.round.challenge.possible.forEach((function(s){e.toUpperCase()==s.toUpperCase()&&(a=!0)})),a},tryThisPassword(e){const a=this;e=e.toUpperCase(),a.ui.passwordAttemptErrors=[];const s=a.tryToCrashWith(e),r=a.tryToFailThis(e),n=a.tryToFindDuplicatePassword(e),o=a.tryToFind(e);let t=!1;if(r&&(a.ui.passwordAttemptErrors=r.reasons,a.ui.passwordInputError=!0),n&&(a.ui.passwordAttemptErrors.push("Someone else has already used "+e+" as a password."),a.ui.passwordInputError=!0),!o){let s=a.round.challenge.failedMessage.replace("[PASS]",e);a.ui.passwordInputError=!0,a.ui.passwordAttemptErrors.push(s)}!o||r||s||n||(t=!0),a.my.passwordAttempts++,a.ui.passwordAttempt="",s?pubnub.publish({channel:a.roomCode,message:{type:"crashedServer",data:{playerIndex:a.my.playerIndex,pwAttempt:e,attemptCount:a.my.passwordAttempts,result:"crash"}}}):t?(soundCorrectGuess.play(),a.passwordSuccess(e)):(soundBadGuess.play(),pubnub.publish({channel:a.roomCode,message:{type:"triedPassword",data:{playerIndex:a.my.playerIndex,pwAttempt:e,attemptCount:a.my.passwordAttempts,result:"failed"}}}))},findPossibleRightAnswers(){const e=this;let a=0;e.round.challenge.possible.forEach((function(s){0==e.tryToFailThis(s)&&a++})),e.round.possibleAnswerCount=a},findAverageSize(){const e=this.round.challenge.possible;for(var a=0,s=0;s<e.length;s++)a+=e[s].length;var r=a/e.length;this.round.averageSize=Math.round(r)},findAverageVowelCount(){const e=this.round.challenge.possible;for(var a=0,s=0;s<e.length;s++){let r=e[s].match(/[aeiou]/gi);r&&(a+=r.length)}var r=a/e.length;this.round.averageVowels=Math.round(r)},countLettersInEachWord(){const e=this,a=e.round.challenge.possible;let s="",r=0,n=[];["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].forEach((function(e,o){s=e,r=0,a.forEach((function(a,s){a.toUpperCase().includes(e)&&r++}));let t={letter:e,count:r};n.push(t)})),e.round.letterCounts=n,e.round.demandableLetters=[],e.round.letterCounts.forEach((function(a){a.count>=e.players.length+2&&e.round.demandableLetters.push(a.letter)}))},passwordSuccess(e){const a=this;a.my.score+=100,a.round.claimedPasswords.length<1&&(a.my.score+=20),a.ui.passwordSucceeded=!0,pubnub.publish({channel:a.roomCode,message:{type:"passwordSuccess",data:{playerIndex:a.my.playerIndex,pwAttempt:e,attemptCount:a.my.passwordAttempts,playerScore:a.my.score,result:"success"}}})},startNextRoundClicked(){const e=this;pubnub.publish({channel:e.roomCode,message:{type:"startNewRound",data:{playerIndex:e.my.playerIndex,players:e.players}}})},tryToCrackWith(e){const a=this;e=e.toUpperCase(),a.ui.passwordAttempt="",a.ui.passwordSuccessMessage="",a.ui.passwordAttemptErrors=[];let s=!1,r=null,n=null,o=!1,t=-1;a.allEmployeePasswords.forEach((function(u,l){u.pw==e&&(s=!0,u.name==a.my.name||u.playerIndex==a.my.playerIndex?(soundYouIdiot.play(),r="You just hacked into your own account. Did you mean to do that?"):u.claimed?(soundTooSlow.play(),o=!0,r="This password was already cracked by "+u.claimed):(n=u.playerIndex,t=l))})),r?a.ui.passwordAttemptErrors.push(r):s?s&&n&&(soundCracked.play(),a.ui.passwordSuccessMessage="The password "+e+" belongs to "+a.players[n].name,a.players[a.my.playerIndex].score+=defaults.hackAccountBonus,a.players[n].score-=defaults.hackAccountBonus,a.allEmployeePasswords[t].claimed=a.my.name,pubnub.publish({channel:a.roomCode,message:{type:"passwordCracked",data:{players:a.players,allEmployeePasswords:a.allEmployeePasswords}}}),a.computedUnclaimedPasswords<1&&pubnub.publish({channel:a.roomCode,message:{type:"gameOver"}})):(soundNo.play(),a.ui.passwordAttemptErrors.push("There is no employee with the password "+e))},setGameOver(){clearInterval(this.round.roundTimer),this.round.roundTimer=void 0,alert("IMAGINE A GAME OVER SCREEN GOES HERE.")}},computed:{computedSysAdminName(){const e=this;return e.players&&e.players.length>0&&e.round.sysAdminIndex>-1?e.players[e.round.sysAdminIndex].name:null},computedSysAdminIndex(){return this.round.sysAdminIndex},computedUnclaimedPasswords(){const e=this;if(e.allEmployeePasswords.length<1)return 0;{let a=0;return e.allEmployeePasswords.forEach((function(e){e.claimed||a++})),a}}},mounted:function(){const e=this;var a=new URLSearchParams(window.location.search);a.has("room")&&(e.roomCode=a.get("room"))},directives:{}});Vue.directive("touppercase",{update(e){e.value=e.value.toUpperCase()}}),Vue.directive("focus",{inserted:function(e){e.focus()}});const theChannel="the_guide",pubnub=new PubNub({publishKey:"pub-c-c25666ba-28d6-41ef-8c12-670fc0f40021",subscribeKey:"sub-c-ba437e90-31bb-11eb-9713-12bae088af96",uuid:playerID});pubnub.addListener({message:function(e){if(displayMessage("[MESSAGE: received]",e.message,e.timetoken,e),"requestPlayers"==e.message.type&&app.isRoomHost&&app.sendPlayerUpdate(),"updatePlayers"==e.message.type&&(app.players=e.message.data.players,app.my&&app.my.playerIndex&&app.my.playerIndex>-1&&(app.my.role=app.players[app.my.playerIndex].role)),"startTheGame"==e.message.type&&(app.players=e.message.data.players,app.my.role=e.message.data.players[app.my.playerIndex].role,app.round.phase="choose rules",app.round.number=1,app.maxRounds=e.message.data.maxRounds,app.round.sysAdminIndex=e.message.data.sysAdminIndex,"SysAdmin"==app.my.role&&app.definePossibleChallenges()),"updatePasswordChallenge"==e.message.type&&(app.round.challenge=e.message.data.challenge,soundNewRule.play()),"updatePasswordRules"==e.message.type&&(app.round.rules=e.message.data.rules,soundNewRule.play()),"updateBugs"==e.message.type&&(app.round.bugs=e.message.data.bugs,soundNewRule.play()),"startGuessing"==e.message.type&&(app.round.phase="create password",app.round.sysAdminIndex=e.message.data.sysAdminIndex,app.roundStartTimer(),soundStartGuessing.play()),"triedPassword"==e.message.type&&app.round.attempts.push(e.message.data),"passwordSuccess"==e.message.type){let a=e.message.data.playerIndex;app.players[a].score=e.message.data.playerScore,app.round.claimedPasswords.push(e.message.data.pwAttempt),app.round.attempts.push(e.message.data),null==app.round.hurryTimer&&app.startHurryTimer();let s={pw:e.message.data.pwAttempt,name:app.players[a].name,playerIndex:a,claimed:!1};app.allEmployeePasswords.push(s),app.round.claimedPasswords.length>=app.players.length-1&&app.endTheGuessingRound()}if("roundOver"==e.message.type&&(app.ui.roundOver=!0,app.ui.passwordSucceeded=!1,app.resetHurryTimer(),app.resetRoundTimer()),"crashedServer"==e.message.type){let a=e.message.data.playerIndex;app.round.phase="crashed",app.round.crash.active=!0,app.round.crash.player=app.players[a],app.round.crash.word=e.message.data.pwAttempt,app.round.attempts.push(e.message.data),soundSystemCrash.play(),"SysAdmin"==app.my.role&&(app.my.score+=100,app.players[app.my.playerIndex].score+=100),app.endTheGuessingRound()}if("startNewRound"==e.message.type){if(app.players=e.message.data.players,app.round.number>=app.maxRounds)app.round.phase="FINAL ROUND",app.startCountdownToFinalRound();else{app.round.phase="choose rules",app.round.number+=1;let e=app.round.sysAdminIndex+1;e>=app.players.length?app.round.sysAdminIndex=0:app.round.sysAdminIndex=e,app.players.forEach((function(e,a){e.role="employee"})),app.players[app.round.sysAdminIndex].role="SysAdmin",app.my.role=app.players[app.my.playerIndex].role}resetUI(),resetRoundVariables(),"SysAdmin"==app.my.role&&app.definePossibleChallenges()}"passwordCracked"==e.message.type&&(app.players=e.message.data.players,app.allEmployeePasswords=app.players=e.message.data.allEmployeePasswords),"gameOver"==e.message.type&&app.setGameOver()},status:function(e){app.requestPlayers(),displayMessage(e.category,"connected to channels: "+e.affectedChannels,e.currentTimetoken,e)},presence:function(e){e.channel!=theChannel&&(app.playerCount=e.occupancy)}}),pubnub.subscribe({channels:["the_guide"],withPresence:!0});const displayMessage=function(e,a,s,r){r?app.messages.push({type:e,msg:a,timeStamp:s,obj:r}):s?app.messages.push({type:e,msg:a,timeStamp:s}):a?app.messages.push({type:e,msg:a}):e&&app.messages.push({type:e})};
//# sourceMappingURL=site.min.js.map