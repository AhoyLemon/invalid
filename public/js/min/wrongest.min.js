function randomNumber(e,o){return Math.floor(Math.random()*(o-e))+e}function randomFrom(e){return e[Math.floor(Math.random()*e.length)]}function shuffle(e){for(var o,t,n=e.length;n;o=Math.floor(Math.random()*n),t=e[--n],e[n]=e[o],e[o]=t);return e}function addCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function findInArray(e,o){let t=e.indexOf(o);return t>-1?t:null}function removeFromArray(e,o){for(var t=e.length-1;t--;)e[t]==o&&e.splice(t,1)}function percentOf(e,o){return 0==e||0==o?0:Math.round(100*o/e)}function sendEvent(e,o,t,n){n?ga("send","event",{eventCategory:e,eventAction:o,eventLabel:t,eventValue:n}):t?ga("send","event",{eventCategory:e,eventAction:o,eventLabel:t}):ga("send","event",{eventCategory:e,eventAction:o})}const fPlusDeck={description:"fart",cards:["We don't know how to make fat people {into thin people or how to make thin people into fat people.}","{Slavery} did not exist in America.","The car has never changed {since the invention of the automobile.}","I am fully capable of going backwards {and forwards in time and at will.}","Most people are not {intellectual enough to understand} Family Guy.","{There is no such thing as a “best”} when it comes to sports or sports teams.","As of 2002, {love went extinct.}","{Being a juggalo} is just like being a normal person.","{Warhammer 40,000} can make anything awesome.","{Man used to live} for hundreds of years disease free.","The first polio vaccine, the Salk vaccine{, was a total disaster}.","There is no difference between night dreams and daytime dreams {except about elephant.}","{Dolphins} know how to access multiple dimensions.","{It is legal to} post nude photos of someone without their consent.","Laura Ingalls Wilder is {God.}","{The Kardashians} are in league with Al-Qaeda.","Light creates {gravity.}","{Canoe} complications are enough to strain any relationship.","{A toilet} is becoming a completely foreign object to women.","The Latino people have never had {a revolution.}","No one on Earth is {gay.}","Ice is the {natural enemy of} bottled water.","We're all {goth} now.","{Leonardo DiCaprio's salary} is bankrupting America.","{Pubic lice are a turn on because} when you go down on someone, they're like right in your nose.","Clowns are {sexy.}","{Dried pee} smells a lot like perfume.","There's nothing perverted about {sniffing a pretty girl's seat cushion.}","Minors find it difficult to {masturbate.}","The inner penis {is before} the outer penis of course.","It's natural for a person to be sexually {attracted to Pokemon.}","I was having sex with my ladyfriend {and we're both prego.}","Women were {made to be} spanked by men.","Jelqing (manually wringing blood into your penis) {is positively REQUIRED just prior to sex.}","Sticking a penis in anyone's mouth, man or woman{, has never been conducive to the benefit of anyone.}","{Ghosts can haunt your anus and} give you mad uncontrollable bouts of farting.","You can't {write porn} as a virgin.","Everyone has a {tickling} fetish.","There is no rational argument for not being a {brony.}","It's almost impossible to quit {giving yourself wedgies.}","America should put all its prisoners {into one giant super prison.}","{Small breasts} are a thing of the past.","You can improve your sex power by {eating garlic.}"]};Vue.directive("focus",{inserted:function(e){e.focus()}});var app=new Vue({el:"#app",data:{roomCode:"",isRoomHost:!1,inRoom:!1,gameStarted:!1,my:{name:"",socketID:"",card:"",playerIndex:-1},gameDeck:{},players:[],cardsPlayed:[],round:{number:0,dealerIndex:-1,activePlayerIndex:-1,playerPresenting:!1,presentationTimer:void 0,presentationTimeLeft:30},ui:{nameEntered:!1}},methods:{createRoom(){const e=this;e.roomCode=function(e){let o="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<e;n++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}(4),socket.emit("createRoom",e.roomCode),e.isRoomHost=!0,e.inRoom=!0;const o=new URL(window.location);o.searchParams.set("room",e.roomCode),window.history.pushState({},"",o)},joinRoom(){const e=this;socket.emit("joinRoom",e.roomCode),socket.emit("requestPlayers",e.roomCode),e.isRoomHost=!1,e.inRoom=!0;const o=new URL(window.location);o.searchParams.set("room",e.roomCode),window.history.pushState({},"",o)},updateMyInfo(){const e=this,o={name:e.my.name,socketID:e.my.socketID,card:""};e.ui.nameEntered?(e.my.playerIndex=-1,e.players.forEach((function(o,t){o.socketID==e.my.socketID&&(e.players[t].name=e.my.name)}))):e.players.push(o),e.players.forEach((function(o,t){o.socketID==e.my.socketID&&(e.my.playerIndex=t)})),e.ui.nameEntered=!0,e.sendPlayerUpdate(),e.my.playerIndex<0&&alert("WARNING: I have a player index of "+e.my.playerIndex+"! This should not happen. I am a bug.")},sendPlayerUpdate(){const e=this;socket.emit("updatePlayers",{roomCode:e.roomCode,players:e.players,gameStarted:e.gameStarted})},startTheGame(){const e=this;let o=shuffle(fPlusDeck);e.gameDeck=o,e.shuffleAndDeal(),socket.emit("startTheGame",{roomCode:e.roomCode,players:e.players,gameDeck:e.gameDeck})},shuffleAndDeal(){const e=this;e.players.forEach((function(o,t){e.players[t].card=e.gameDeck.cards[0],e.gameDeck.cards.shift()})),e.sendPlayerUpdate()},dealCard(){const e=this;e.round.activePlayerIndex++,socket.emit("startPresenting",{roomCode:e.roomCode,activePlayerIndex:e.round.activePlayerIndex,activePlayerName:e.players[e.round.activePlayerIndex].name})},startPresentationTimer(){const e=this;e.round.presentationTimeLeft=30,e.round.presentationTimer=setInterval((()=>{e.round.presentationTimeLeft-=.05,e.round.presentationTimeLeft=e.round.presentationTimeLeft.toFixed(2),$(".timer").val(e.round.presentationTimeLeft).trigger("change"),e.round.presentationTimeLeft<=0&&(alert("time is up!"),e.round.playerPresenting=!1,e.resetPresentationTimer())}),50),setTimeout((function(){$(".timer").knob()}),1e3)},resetPresentationTimer(){const e=this;clearInterval(e.round.presentationTimer),e.round.presentationTimer=void 0,e.round.presentationTimeLeft=30},cardText(e){if(this.gameStarted&&this.computedAmIPresenting){return e.replace("{",'<span class="secret-text">').replace("}","</span>")}return e.replace(/\{.*?\}/,"...")}},computed:{computedAmITheDealer(){return this.my.playerIndex==this.round.dealerIndex},computedAmIPresenting(){const e=this;return 1==e.round.playerPresenting&&e.round.activePlayerIndex==e.my.playerIndex}},mounted:function(){const e=this;var o=new URLSearchParams(window.location.search);o.has("room")&&(e.roomCode=o.get("room").toUpperCase())}});socket.on("getSocketID",(function(e){console.info("Player socketID is "+e),app.my.socketID=e})),socket.on("joinRoom",(function(e){})),socket.on("requestPlayers",(function(e){console.log("The client wants players from me!"),app.isRoomHost&&(socket.emit("updatePlayers",{roomCode:app.roomCode,players:app.players,gameStarted:app.gameStarted}),console.log("I'm the host! I gave the room all the players I know about!"))})),socket.on("updatePlayers",(function(e){console.log("THE PLAYERS HAVE BEEN UPDATED!!!!!!!!"),app.players=e.players,app.gameStarted=e.gameStarted,app.my.playerIndex>-1&&(app.my.card=app.players[app.my.playerIndex].card)})),socket.on("startTheGame",(function(e){app.players=e.players,app.gameDeck=e.gameDeck,app.gameStarted=!0,app.round.number=1,app.round.dealerIndex=0})),socket.on("startPresenting",(function(e){app.round.activePlayerIndex=e.activePlayerIndex,app.round.playerPresenting=!0,app.startPresentationTimer()}));