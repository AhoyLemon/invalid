function randomNumber(e,t){return Math.floor(Math.random()*(t-e))+e}function randomFrom(e){return e[Math.floor(Math.random()*e.length)]}function shuffle(e){for(var t,o,n=e.length;n;t=Math.floor(Math.random()*n),o=e[--n],e[n]=e[t],e[t]=o);return e}function addCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function findInArray(e,t){let o=e.indexOf(t);return o>-1?o:null}function removeFromArray(e,t){for(var o=e.length-1;o--;)e[o]==t&&e.splice(o,1)}function percentOf(e,t){return 0==e||0==t?0:Math.round(100*t/e)}function sendEvent(e,t,o,n){n?ga("send","event",{eventCategory:e,eventAction:t,eventLabel:o,eventValue:n}):o?ga("send","event",{eventCategory:e,eventAction:t,eventLabel:o}):ga("send","event",{eventCategory:e,eventAction:t})}const fPlusDeck={description:"fart",cards:["We don't know how to make fat people {into thin people or how to make thin people into fat people.}","{Slavery} did not exist in America.","The car has never changed {since the invention of the automobile.}","I am fully capable of going backwards {and forwards in time and at will.}","Most people are not {intellectual enough to understand} Family Guy.","{There is no such thing as a “best”} when it comes to sports or sports teams.","As of 2002, {love went extinct.}","{Being a juggalo} is just like being a normal person.","{Warhammer 40,000} can make anything awesome.","{Man used to live} for hundreds of years disease free.","The first polio vaccine, the Salk vaccine{, was a total disaster}.","There is no difference between night dreams and daytime dreams {except about elephant.}","{Dolphins} know how to access multiple dimensions.","{It is legal to} post nude photos of someone without their consent.","Laura Ingalls Wilder is {God.}","{The Kardashians} are in league with Al-Qaeda.","Light creates {gravity.}","{Canoe} complications are enough to strain any relationship.","{A toilet} is becoming a completely foreign object to women.","The Latino people have never had {a revolution.}","No one on Earth is {gay.}","Ice is the {natural enemy of} bottled water.","We're all {goth} now.","{Leonardo DiCaprio's salary} is bankrupting America.","{Pubic lice are a turn on because} when you go down on someone, they're like right in your nose.","Clowns are {sexy.}","{Dried pee} smells a lot like perfume.","There's nothing perverted about {sniffing a pretty girl's seat cushion.}","Minors find it difficult to {masturbate.}","The inner penis {is before} the outer penis of course.","It's natural for a person to be sexually {attracted to Pokemon.}","I was having sex with my ladyfriend {and we're both prego.}","Women were {made to be} spanked by men.","Jelqing (manually wringing blood into your penis) {is positively REQUIRED just prior to sex.}","Sticking a penis in anyone's mouth, man or woman{, has never been conducive to the benefit of anyone.}","{Ghosts can haunt your anus and} give you mad uncontrollable bouts of farting.","You can't {write porn} as a virgin.","Everyone has a {tickling} fetish.","There is no rational argument for not being a {brony.}","It's almost impossible to quit {giving yourself wedgies.}","America should put all its prisoners {into one giant super prison.}","{Small breasts} are a thing of the past.","You can improve your sex power by {eating garlic.}"]},settings={timeToPresent:30};function resetRoundVariables(){app.round.phase="presenting",app.round.activePlayerIndex=-1,app.round.dealerIndex=0,app.round.playerPresenting=!1,app.round.presentationTimer=void 0,app.round.presentationTimeLeft=settings.timeToPresent,app.round.cardsPresented=[],app.round.votesSubmitted=0}function resetUIVariables(){app.ui.upVoteIndex=-1,app.ui.downVoteIndex=-1,app.ui.iVoted=!1}Vue.directive("focus",{inserted:function(e){e.focus()}});var app=new Vue({el:"#app",data:{roomCode:"",isRoomHost:!1,inRoom:!1,gameStarted:!1,gameOver:!1,maxRounds:0,my:{name:"",socketID:"",card:"",playerIndex:-1},gameDeck:{},players:[],cardsPlayed:[],round:{phase:"",number:0,dealerIndex:-1,activePlayerIndex:-1,playerPresenting:!1,presentationTimer:void 0,presentationTimeLeft:settings.timeToPresent,cardsPresented:[],votesSubmitted:0},ui:{nameEntered:!1,upVoteIndex:-1,downVoteIndex:-1,iVoted:!1},statementHistory:[],voteHistory:[]},methods:{createRoom(){const e=this;e.roomCode=function(e){let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}(4),socket.emit("createRoom",e.roomCode),e.isRoomHost=!0,e.inRoom=!0;const t=new URL(window.location);t.searchParams.set("room",e.roomCode),window.history.pushState({},"",t)},joinRoom(){const e=this;socket.emit("joinRoom",e.roomCode),socket.emit("requestPlayers",e.roomCode),e.isRoomHost=!1,e.inRoom=!0;const t=new URL(window.location);t.searchParams.set("room",e.roomCode),window.history.pushState({},"",t)},updateMyInfo(){const e=this,t={name:e.my.name,socketID:e.my.socketID,card:"",score:0};e.ui.nameEntered?(e.my.playerIndex=-1,e.players.forEach((function(t,o){t.socketID==e.my.socketID&&(e.players[o].name=e.my.name)}))):e.players.push(t),e.players.forEach((function(t,o){t.socketID==e.my.socketID&&(e.my.playerIndex=o)})),e.ui.nameEntered=!0,e.sendPlayerUpdate(),e.my.playerIndex<0&&alert("WARNING: I have a player index of "+e.my.playerIndex+"! This should not happen. I am a bug.")},sendPlayerUpdate(){const e=this;socket.emit("updatePlayers",{roomCode:e.roomCode,players:e.players,gameStarted:e.gameStarted,roundNumber:e.round.number})},startTheGame(){const e=this;let t=shuffle(fPlusDeck.cards);e.gameDeck.cards=t,e.dealOutCards(),3==e.computedPlayerCount?e.maxRounds=6:e.maxRounds=e.computedPlayerCount,socket.emit("startTheGame",{roomCode:e.roomCode,players:e.players,gameDeck:e.gameDeck,maxRounds:e.maxRounds})},dealOutCards(){const e=this;e.players.forEach((function(t,o){e.players[o].card=e.gameDeck.cards[0],e.gameDeck.cards.shift()}))},sendGameDeck(){socket.emit("sendGameDeck",{roomCode:self.roomCode,gameDeck:self.gameDeck})},dealCard(){const e=this;e.round.activePlayerIndex++,socket.emit("startPresenting",{roomCode:e.roomCode,activePlayerIndex:e.round.activePlayerIndex,activePlayerName:e.players[e.round.activePlayerIndex].name})},presentationFinished(){const e=this;socket.emit("donePresenting",{roomCode:e.roomCode,activePlayerIndex:e.round.activePlayerIndex,activePlayerName:e.players[e.round.activePlayerIndex].name,activePlayerCard:e.players[e.round.activePlayerIndex].card})},startVoting(){socket.emit("startVoting",{roomCode:this.roomCode,cardsPresented:this.round.cardsPresented})},voteUp(e){const t=this;t.ui.upVoteIndex=e,t.ui.downVoteIndex==e&&(t.ui.downVoteIndex=-1)},voteDown(e){const t=this;t.ui.downVoteIndex=e,t.ui.upVoteIndex==e&&(t.ui.upVoteIndex=-1)},submitVotes(){const e=this;socket.emit("submitVotes",{roomCode:e.roomCode,votingPlayerIndex:e.my.playerIndex,votingPlayerName:e.my.name,downVoteIndex:e.ui.downVoteIndex,upVoteIndex:e.ui.upVoteIndex}),e.ui.iVoted=!0},startNextRound(){const e=this;e.players.push(e.players.shift()),e.round.number+=1,e.dealOutCards();const t=e.statementHistory.concat(e.round.cardsPresented);e.statementHistory=t,socket.emit("startNextRound",{roomCode:e.roomCode,players:e.players,gameDeck:e.gameDeck,statementHistory:e.statementHistory,roundNumber:e.round.number})},startPresentationTimer(){const e=this;e.round.presentationTimeLeft=settings.timeToPresent,e.round.presentationTimer=setInterval((()=>{e.round.presentationTimeLeft-=.05,e.round.presentationTimeLeft<=0&&e.computedAmIPresenting&&e.presentationFinished()}),50)},resetPresentationTimer(){const e=this;clearInterval(e.round.presentationTimer),e.round.presentationTimer=void 0,e.round.presentationTimeLeft=settings.timeToPresent},cardText(e){const t=this;if(t.gameStarted&&t.computedAmIPresenting){return e.replace("{",'<span class="secret-text">').replace("}","</span>")}return"presenting"==t.round.phase&&t.round.activePlayerIndex<t.my.playerIndex?e.replace(/\{.*?\}/,"..."):e.replace("{","").replace("}","")}},computed:{computedPlayerCount(){const e=this;return e.players&&e.players.length>=0?e.players.length:0},computedCanIAdvanceTheGame(){const e=this;return"presenting"==e.round.phase?e.round.activePlayerIndex+1==e.my.playerIndex&&!e.round.playerPresenting||0==e.my.playerIndex&&e.players.length==e.round.activePlayerIndex+1&&!e.round.playerPresenting:"voting"==e.round.phase&&(0==e.my.playerIndex&&e.round.votesSubmitted>=e.computedPlayerCount)},computedAmIPresenting(){const e=this;return 1==e.round.playerPresenting&&e.round.activePlayerIndex==e.my.playerIndex},computedAreAllVotesCast(){return this.round.votesSubmitted>=this.computedPlayerCount},computedDashOffset(){let e=percentOf(this.round.presentationTimeLeft,settings.timeToPresent);return(251-percentOf(e,251)).toFixed(2)+"px"},computedPlayersByScore(){return[...this.players].sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:0}))},computedStatementsByScore(){let e=[...this.statementHistory].sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:0})),t=e.filter((t=>t.score>=e[0].score));return{wrongest:e.filter((t=>t.score<=e[e.length-1].score)),leastWrong:t,all:e}}},mounted:function(){const e=this;var t=new URLSearchParams(window.location.search);t.has("room")&&(e.roomCode=t.get("room").toUpperCase()),e.startPresentationTimer()}});socket.on("getSocketID",(function(e){console.info("Player socketID is "+e),app.my.socketID=e})),socket.on("joinRoom",(function(e){})),socket.on("requestPlayers",(function(e){console.log("The client wants players from me!"),app.isRoomHost&&(socket.emit("updatePlayers",{roomCode:app.roomCode,players:app.players,gameStarted:app.gameStarted}),console.log("I'm the host! I gave the room all the players I know about!"))})),socket.on("updatePlayers",(function(e){console.log("THE PLAYERS HAVE BEEN UPDATED!!!!!!!!"),app.players=e.players,app.gameStarted=e.gameStarted,app.round.number=e.roundNumber})),socket.on("startTheGame",(function(e){app.players=e.players,app.gameDeck=e.gameDeck,app.maxRounds=e.maxRounds,app.gameStarted=!0,app.round.number=1,app.round.dealerIndex=0,app.round.phase="presenting",app.players.forEach((function(e,t){e.socketID==app.my.socketID&&(app.my.playerIndex=t)})),app.my.playerIndex>-1&&(app.my.card=app.players[app.my.playerIndex].card)})),socket.on("startPresenting",(function(e){app.round.activePlayerIndex=e.activePlayerIndex,app.round.playerPresenting=!0,app.startPresentationTimer()})),socket.on("donePresenting",(function(e){app.round.cardsPresented.push({card:e.activePlayerCard,playerIndex:e.activePlayerIndex,playerName:e.activePlayerName,score:0}),app.round.playerPresenting=!1,app.resetPresentationTimer()})),socket.on("startVoting",(function(e){app.round.cardsPresented=e.cardsPresented,app.round.phase="voting"})),socket.on("submitVotes",(function(e){app.voteHistory.push({downVoteIndex:e.downVoteIndex,voterName:e.votingPlayerName,voted:"down",presenter:app.round.cardsPresented[e.downVoteIndex].playerName,card:app.round.cardsPresented[e.downVoteIndex].card});app.voteHistory.push({upVoteIndex:e.upVoteIndex,voterName:e.votingPlayerName,voted:"up",presenter:app.round.cardsPresented[e.upVoteIndex].playerName,card:app.round.cardsPresented[e.upVoteIndex].card}),app.players[e.downVoteIndex].score-=1,app.round.cardsPresented[e.downVoteIndex].score-=1,app.players[e.upVoteIndex].score+=1,app.round.cardsPresented[e.upVoteIndex].score+=1,app.round.votesSubmitted+=1,app.round.votesSubmitted,app.computedPlayerCount})),socket.on("startNextRound",(function(e){app.players=e.players,app.gameDeck=e.gameDeck,app.round.number=e.roundNumber,app.statementHistory=e.statementHistory,resetRoundVariables(),resetUIVariables(),app.players.forEach((function(e,t){e.socketID==app.my.socketID&&(app.my.playerIndex=t)})),app.my.playerIndex>-1&&(app.my.card=app.players[app.my.playerIndex].card)}));